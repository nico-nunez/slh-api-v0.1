<% layout('layouts/boilerplate') %>

<div class="row">
	<h1 class="text-center">Register</h1>
	<div class="col-lg-6 col-md-8 ms-auto me-auto card py-4 px-4">
		<% if (loggedInUser) { %>
		<a href="/auth/logout" class="btn btn-primary">Logout</a>
		<% } else { %>
		<form
			action="/auth/register"
			method="POST"
			novalidate
			class="validate-form"
		>
			<div class="mb-3 form-group">
				<label class="form-label" for="email">Email:</label>
				<input
					class="form-control"
					type="email"
					name="newUser[email]"
					id="email"
					placeholder="red-nose@reindeer.com"
					required
				/>
			</div>
			<div class="mb-3 form-group">
				<label class="form-label" for="displayName">Profile Name:</label>
				<input
					class="form-control"
					type="text"
					name="newUser[displayName]"
					id="profileName"
					placeholder="Rudolph"
					required
				/>
			</div>
			<div class="mb-3 form-group">
				<label for="avatars" class="form-label">Avatar:</label>
				<% for (const [i, avatar] of avatars.entries()) { %> <input type="radio"
				class="btn-check avatar-input" name="newUser[avatar]" id="avatar<%= i
				%>" autocomplete="off" <%= i===0 ? 'checked' : '' %> value="<%=
				avatar.srcURL %>" >
				<label class="btn avatar-label" for="avatar<%= i %>">
					<img
						src="<%= avatar.srcURL %> "
						alt="<%= avatar.description %>"
						class="avatar-registration"
					/>
				</label>
				<% } %>
			</div>
			<div class="mb-3 form-group">
				<label class="form-label" for="password">Password</label>
				<div class="password-input-group">
					<input
						class="form-control password-input"
						type="password"
						name="newUser[password]"
						id="password"
						placeholder="password"
						required
					/>
					<i class="far fa-eye password-eye-con text-muted"></i>
				</div>
				<p class="text-muted text-xsmall mt-1 mb-0">
					Must be a minimum of 8 characters and contain at least:
				</p>
				<p class="text-muted text-xsmall mb-0">
					- an uppercase and a lowercase letter.
				</p>
				<p class="text-muted text-xsmall mb-0">
					- a number and a special charcter [!@$%&*?].
				</p>
			</div>
			<div class="mb-3 form-group">
				<label class="form-label" for="confirmPass">Confirm</label>
				<div class="password-input-group">
					<input
						class="form-control password-input"
						type="password"
						name="newUser[confirmPass]"
						id="confirmPass"
						placeholder="re-type password"
						required
					/>
					<i class="far fa-eye password-eye-con text-muted"></i>
				</div>
			</div>
			<div class="d-flex align-items-end">
				<button class="btn btn-primary me-3" id="register-button">
					Register
				</button>
				or
				<a href="/auth/login" class="ms-3">Login</a>
			</div>
		</form>
		<% } %>
	</div>
</div>
<script src="/js/register.js"></script>
